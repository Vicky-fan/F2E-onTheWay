<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>refs</title>
	<div id="app"></div>
	
	<script src="build/react.js"></script>
	<script src="build/JSXTransformer.js"></script>
	<script type="text/jsx">
	var FormApp = React.createClass({
		getInitialState: function () {
			return {
				inputValue: "input value",
				selectValue: "C",
				radioValue: "B",
				checkValue: [],
				textareaValue: 'text of textarea'
			}
		},
		handleRadio: function (e) {
			this.setState({
				radioValue: e.target.value
			})
		},
		handleCheckbox: function (e) {
			var checkValue = this.state.checkValue.slice();
			var newValue = e.target.value;
			var index = checkValue.indexOf(newValue); 
			if (index == -1) {
				checkValue.push(newValue);
			} else {
				checkValue.splice(index, 1);
			}
			this.setState({
				checkValue: checkValue
			});
		},
		handleSubmit: function (e) {
			e.preventDefault();
			console.log('提交ing……');
			var formData = {
				inputValue: React.findDOMNode(this.refs.myInput).value,
				selectValue: React.findDOMNode(this.refs.mySelect).value,
				radioValue: this.state.radioValue,
				checkValue: this.state.checkValue,
				textareaValue: React.findDOMNode(this.refs.myTextarea).value
			}
			console.log('form result:');
			console.log(formData);
		},

		render: function () {
			return (
				<form onSubmit={this.handleSubmit}>
					<input ref="myInput" type="text" defaultValue={this.state.inputValue} />
					<p>选项</p>
					<select ref="mySelect" defaultValue={this.state.selectValue} >
						<option value="A">A</option>
						<option value="B">B</option>
						<option value="C">C</option>
						<option value="D">D</option>
						<option value="E">E</option>
					</select>
					<RadioApp handleRadio={this.handleRadio} />
					<Checkboxapp handleCheckbox={this.handleCheckbox} />
					<p>textarea</p>
					<textarea  ref="myTextarea" defaultValue={this.state.textareaValue}></textarea>
					<button type="submit">提交</button>
				</form>
			)
		}
	});
	var RadioApp = React.createClass({
		render: function () {	
			return (
				<div>
					<p>radio</p>
					A<input onChange={this.props.handleRadio} type="radio" name="opt" value="A" />
					B<input onChange={this.props.handleRadio} type="radio" name="opt" value="B" defaultChecked/>
					C<input onChange={this.props.handleRadio} type="radio" name="opt" value="C" />
				</div>
			)
		}
	});
	var Checkboxapp = React.createClass({
		render: function () {
			return (
				<div>
					<p>checkbox</p>
					A<input onChange={this.props.handleCheckbox} type="checkbox" value="A" />
					B<input onChange={this.props.handleCheckbox} type="checkbox" value="B" />
					C<input onChange={this.props.handleCheckbox} type="checkbox" value="C" />
					D<input onChange={this.props.handleCheckbox} type="checkbox" value="D" />
				</div>
			)	
		}
	});
	React.render(
		<FormApp />,
		document.getElementById('app'),
		function () {
			console.log('渲染完毕！')
		}
	);
	</script>
</head>
<body>
	