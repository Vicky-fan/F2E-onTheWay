<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>组件生命周期</title>
	<h2>组件生命周期</h2>
	<div id="app"></div>
	
	<script src="build/react.js"></script>
	<script src="build/JSXTransformer.js"></script>
	<script type="text/jsx">
	var LifeApp = React.createClass({
		getInitialState: function () {
			console.log('getInitialState');
			return {
				count: 0
			}
		},
		getDefaultProps: function () {
			console.log('getDefaultProps');
			return {}
		},
		componentWillMount: function () {
			console.log('componentWillMount');
			var self = this;
			this.timer = setInterval(function(){
					self.setState({
						count: self.state.count + 1,
					})
				},1000);
			
		},
		componentDidMount: function () {
			console.log('componentDidMount');
			console.log(this.getDOMNode());
		},
		componentWillUnmount: function () {
			clearInterval(this.timer);
		},
		killMe: function () {
			alert('you are tring to kill me !! ');
			React.unmountComponentAtNode(document.getElementById('app'));
		},
		render: function () {
			console.log('渲染');
			return (
				<div>
					<p>当前技数是{this.state.count}</p>
					<button onClick={this.killMe}>卸载组件</button>
					<SubApp />
				</div>
			)
		}
	});

	var SubApp = React.createClass({
		render: function () {
			return (
				<p>写代码很有意思</p>
			)
		}
	});
	var lifeApp = React.render(
		<LifeApp />,
		document.getElementById('app'),
		function () {
			console.log('渲染完毕！');
		}
	);
	
	</script>
</head>
<body>
	